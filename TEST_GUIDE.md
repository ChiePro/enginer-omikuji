# ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯TDDï¼ˆTest-Driven Developmentï¼‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«åŸºã¥ã„ã¦é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ§ª ãƒ†ã‚¹ãƒˆç’°å¢ƒ

### å˜ä½“ãƒ†ã‚¹ãƒˆ (Vitest)

**ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ**:
```bash
# å˜ç™ºå®Ÿè¡Œ
npm run test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
npm run test:watch

# UIãƒ¢ãƒ¼ãƒ‰
npm run test:ui

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
npm run test:coverage
```

**ç’°å¢ƒè¨­å®š**:
- ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼: Vitest 4.x
- DOMç’°å¢ƒ: Happy DOM
- ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: React Testing Library
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«: `src/test/setup.ts`

### E2Eãƒ†ã‚¹ãƒˆ (Playwright)

**ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ**:
```bash
# E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:e2e

# UIãƒ¢ãƒ¼ãƒ‰
npm run test:e2e:ui

# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:all
```

**å¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶**:
- Chromium
- Firefox
- Webkit (Safari)
- Mobile Chrome
- Mobile Safari

## ğŸ› ï¸ ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼

### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼

`src/test/helpers/omikuji-test-helpers.ts` ã«ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆé–¢æ•°ã‚’ç”¨æ„:

```typescript
import { createTestOmikujiType, createTestOmikujiTypes } from '@/test/helpers/omikuji-test-helpers'

// å˜ä¸€ã®ãƒ†ã‚¹ãƒˆãŠã¿ãã˜ã‚¿ã‚¤ãƒ—ã‚’ä½œæˆ
const omikujiType = createTestOmikujiType({
  id: 'custom-test',
  name: 'ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆ'
})

// è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
const omikujiTypes = createTestOmikujiTypes()
```

### React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼

`src/test/helpers/react-test-utils.tsx` ã«Reactãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ç”¨æ„:

```typescript
import { render, setupUserEvent } from '@/test/helpers/react-test-utils'

// ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒ³ãƒ€ãƒ¼é–¢æ•°ã®ä½¿ç”¨
const { getByText } = render(<YourComponent />)

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
const user = setupUserEvent()
await user.click(button)
```

## ğŸ“ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
src/
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ setup.ts                    # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ†ã‚¹ãƒˆè¨­å®š
â”‚   â””â”€â”€ helpers/
â”‚       â”œâ”€â”€ omikuji-test-helpers.ts # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚       â””â”€â”€ react-test-utils.tsx    # React ãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ **/*.test.ts               # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®å˜ä½“ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ features/
â”‚   â””â”€â”€ **/*.test.tsx              # ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
â””â”€â”€ components/
    â””â”€â”€ **/*.test.tsx              # æ±ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

e2e/
â””â”€â”€ **/*.spec.ts                   # E2Eãƒ†ã‚¹ãƒˆ
```

## ğŸ¯ TDDã‚µã‚¤ã‚¯ãƒ«

### Red-Green-Refactor

1. **Red**: å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
2. **Green**: ãƒ†ã‚¹ãƒˆã‚’é€šã™æœ€å°é™ã®å®Ÿè£…ã‚’è¡Œã†
3. **Refactor**: ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„ã™ã‚‹

### ãƒ†ã‚¹ãƒˆå‘½åè¦ç´„

```typescript
describe('[ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚¯ãƒ©ã‚¹å]', () => {
  describe('[ãƒ¡ã‚½ãƒƒãƒ‰å/çŠ¶æ³]', () => {
    it('[æœŸå¾…ã•ã‚Œã‚‹æŒ¯ã‚‹èˆã„]', () => {
      // Arrange (æº–å‚™)
      // Act (å®Ÿè¡Œ)  
      // Assert (æ¤œè¨¼)
    });
  });
});
```

## ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

- **ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤**: 100% ãƒ–ãƒ©ãƒ³ãƒã‚«ãƒãƒ¬ãƒƒã‚¸
- **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤**: 95% ãƒ–ãƒ©ãƒ³ãƒã‚«ãƒãƒ¬ãƒƒã‚¸
- **ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤**: 85% ãƒ–ãƒ©ãƒ³ãƒã‚«ãƒãƒ¬ãƒƒã‚¸

## ğŸ”§ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

- **Vitest**: `vitest.config.ts`
- **Playwright**: `playwright.config.ts`
- **TypeScript**: `tsconfig.json`

## ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: å®Ÿè£…å‰ã«å¿…ãšãƒ†ã‚¹ãƒˆã‚’æ›¸ã
2. **å°ã•ãªã‚¹ãƒ†ãƒƒãƒ—**: ä¸€åº¦ã«ä¸€ã¤ã®ã“ã¨ã ã‘ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹
3. **æŒ¯ã‚‹èˆã„ãƒ†ã‚¹ãƒˆ**: whatï¼ˆä½•ã‚’ï¼‰ã§ã¯ãªãã€whyï¼ˆãªãœï¼‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹
4. **ãƒ†ã‚¹ãƒˆã®ç‹¬ç«‹æ€§**: ãƒ†ã‚¹ãƒˆé–“ã«ä¾å­˜é–¢ä¿‚ã‚’ä½œã‚‰ãªã„
5. **åˆ†ã‹ã‚Šã‚„ã™ã„å‘½å**: ãƒ†ã‚¹ãƒˆåã§æœŸå¾…å‹•ä½œãŒç†è§£ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹